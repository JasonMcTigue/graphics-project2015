<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Game</title>
      
    <style type="text/css">
      canvas {
        border: 3px solid black;
      }
      </style>
  </head>
  <body>
    
     <canvas id="gamecanvas" width="1000px" height="600px"></canvas>

    <script type="text/javascript">
      // Gets a handle to the element with id gamecanvas.
      var canvas = document.getElementById("gamecanvas");
      // Get a 2D context for the canvas.
      var ctx = canvas.getContext("2d");  
        
        
        // An object for the ball.
      var ball = {
        position: {x: 200, y: 10}
        , radius: 8
        , velocity: {x: 3, y: 2}
      }
      
      //an object for player one (left paddle)
      var player1 = {
        position: {x: 500, y: 590}
        , width: 95
        , length: 10
      }
      
      //an object for player two (right paddle)
      var player2 = {
        position: {x: 600, y: 10}
        , width: 95
        , length: 10
      }
      
       function draw() {
           
        //Draws player one paddle and sets the colour and position
        ctx.fillStyle = "rgb(255, 0, 0)";//sets paddle to red
        ctx.beginPath();
        ctx.rect(player1.position.x, player1.position.y,player1.width,player1.length);//draws rectangle at given coords
        ctx.fill();
          
        //Draws player two paddle and sets the colour and position
        ctx.fillStyle = "rgb(0, 0, 255)";//sets paddle to blue
        ctx.beginPath();
        ctx.rect(player2.position.x, player2.position.y,player2.width,player2.length);//draws rectangle at given coords
        ctx.fill();
        
        //Draws the ball
        ctx.fillStyle = "rgb(0, 255, 0)";//sets paddle to green
        ctx.beginPath();
        ctx.arc(ball.position.x, ball.position.y, ball.radius, 0, 2 * Math.PI);//draws circle at given coords
        ctx.fill();
           
           
      }//end draw()
        
         
      // Add an event listener to the keypress event.
     
        window.addEventListener("keydown", function(event) { 
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        
       //lets the user use the up and down arrowns to move the paddle.
        //also lets the user use the q and w keys to left up and right.
       if (event.keyCode == 39 && player1.position.x < canvas.width - player1.width || event.keyCode == 81 && player1.position.x < canvas.width - player1.width)
          player1.position.x += 15;
       
        else if (event.keyCode == 37 && player1.position.x + player1.width > player1.width || event.keyCode == 87 && player1.position.x + player1.width > player1.width )
          player1.position.x -= 15;
            
            
            //Lets the user control the second paddle
               if (event.keyCode == 39 && player2.position.x < canvas.width - player2.width || event.keyCode == 81 && player2.position.x < canvas.width - player2.width )
                   
          player2.position.x += 15;
       
        else if (event.keyCode == 37 && player2.position.x + player2.width > player2.width || event.keyCode == 87 && player2.position.x + player2.width > player2.width )
          player2.position.x -= 15;
      });//end addEventListener
        
        function collide() {
			if (ball.position.x + ball.radius < player1.position.x || ball.position.x - ball.radius > player1.position.x + player1.width)
				return;//checks collision between the ball the the paddle and makes sure that the ball will either hit the paddle or the canvas.
			
            
            else if (ball.position.y + ball.radius < player1.position.y || ball.position.y - ball.radius > player1.position.y + player1.length)
				return; //checks the y position
           
			else{
				ball.velocity.y = - ball.velocity.y;
            }
            //console.log(player1.position.x);
         
		}// EndCollide
        
        function collideWithPlayer2() {
			if (ball.position.x + ball.radius < player2.position.x || ball.position.x - ball.radius > player2.position.x + player2.width)//makes it the top
				return;//checks collision between the ball the the paddle and makes sure that the ball will either the paddle or canvas for the second paddle
			
             else if (ball.position.y + ball.radius < player2.position.y || ball.position.y - ball.radius > player2.position.y + player2.length)
				return;
			
			else{
				ball.velocity.y = - ball.velocity.y;
            }
         
		} // EndcollideWithPlayer2()
        
      // A function to repeat every time the animation loops.
      function repeatme() {
        
        ctx.clearRect(0, 0, canvas.width, canvas.height);
          
        // Update the y location.
		ball.position.x += ball.velocity.x;
        ball.position.y += ball.velocity.y;
		
		// Keep the animation going while the ball has not touched the canvas bottom.
        if ((ball.position.x >= canvas.width - ball.radius) ||  (ball.position.x <= ball.radius))
          ball.velocity.x = -ball.velocity.x;    
		if ((ball.position.y >= canvas.height - ball.radius) ||  (ball.position.y <= ball.radius))
          ball.velocity.y = -ball.velocity.y;
        
        draw();//calls the function to draw obljects to the screen.
        collide();//calls the collide function
        collideWithPlayer2();//calls the collide fucntion for the second paddle
          
        window.requestAnimationFrame(repeatme);
      }//end function repeatme();

      // Get the animation going.
      window.requestAnimationFrame(repeatme);
        
    </script>
  </body>
</html>